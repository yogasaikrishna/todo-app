name: mySql Blueprint
description: mySql Blueprint
location: localhost
services:
- type: brooklyn.entity.database.mysql.MySqlNode
  id: db
  brooklyn.config:
    mysql.port: 3306
    datastore.creation.script.contents: |

      create database todo;
      use todo;
      grant usage on *.* to 'brooklyn'@'%' identified by 'br00k11n';
      grant usage on *.* to 'brooklyn'@'localhost' identified by 'br00k11n';
      grant all privileges on todo.* to 'brooklyn'@'%';
      flush privileges;
      CREATE TABLE todo_list (
        id INT NOT NULL AUTO_INCREMENT,
        title VARCHAR(30) NOT NULL,
        status VARCHAR(30) NOT NULL,
        completed boolean NOT NULL default 0,
        PRIMARY KEY (ID)
      );

      INSERT INTO todo_list values (default, 'Isaac Asimov', "", 0);

- type: org.apache.brooklyn.entity.webapp.nodejs.NodeJsWebAppService
  id: nodejs
  brooklyn.config:
    gitRepoUrl:
      "https://github.com/justinThompson/todo-app.git"
    appFileName: app.js
    appName: todo-list-app
